InbusMessage

Broadcaster
    manage(Subscriber)
    broadcast(Publisher)

InbusMessage
    ctor(udp-message)
    isFromSubscriber()
        returns null or Subscriber
    isFromPublisher() 
        returns null or Publisher

InbusMessage uses BroadCaster
    uses SubscriberRegistry

addr, mesg = Udp.receive(bufSize)
Broadcaster.process(InbusMessage(mesg))
    

class InbusMessage
    bool isPubliser
    bool isFromSubscriber

class Broadcaster
    
    process(inbusMesg)
        if inbusMesg.isFromSubscriber()
            subscriber = new Subscriber(inbusMesg)
            if subscriber.wantsToSubscribe()
                add to list
            elif subscriber.wantsToUnsubscribe()
                remove from list
        publisher = inbusMsg.isFromPublisher()
        if publisher
            for s is all Subscribers in list
               s.publish(publisher) 
            
    
forever
    if inbusMesg.isFromSubscriber()
        subscriber = new Subscriber(inbusMesg)
        broadcaster.manage(subscriber)
    elif inbusMesg.isFromPublisher()
        broadcaster.broadcast(new Publisher(inbusMesg))

